# 📊 量化回测系统 V2.1

> 专业的多策略量化交易回测平台

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![Flask](https://img.shields.io/badge/Flask-2.3.2-green.svg)](https://flask.palletsprojects.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

---

## ✨ 核心特性

- 🎯 **4套内置策略** - 量能突破、稳健趋势、激进动量、平衡多因子
- 📊 **真实数据源** - 接入 efinance 和 akshare，支持全市场股票
- 💾 **智能缓存** - 本地 SQLite 数据库，支持增量更新
- 🔄 **多板块回测** - 支持沪深A股、创业板、科创板等
- 📈 **可视化报告** - 详细的收益分析和 Excel 导出
- 🎨 **Web界面** - 简洁直观的操作界面

---

## 🚀 5分钟快速开始

### Windows 用户

1. **解压文件包**到任意目录
2. **双击** `安装依赖.bat` （仅首次运行）
3. **双击** `启动应用.bat`
4. **浏览器访问** `http://localhost:5000`

### Mac/Linux 用户

```bash
# 1. 安装依赖
pip install -r requirements_release.txt

# 2. 启动应用
python app_with_cache.py

# 3. 访问 http://localhost:5000
```

---

## 📖 使用流程

```
1️⃣ 获取数据          2️⃣ 选择策略          3️⃣ 运行回测          4️⃣ 查看结果
   ↓                    ↓                    ↓                    ↓
批量下载股票数据    → 配置策略参数    →  启动回测任务    →  导出Excel报告
（支持按板块筛选）   （4套策略可选）    （支持多板块）     （详细交易记录）
```

---

## 🎯 策略介绍

| 策略名称 | 交易风格 | 适用市场 | 风险等级 |
|---------|---------|---------|---------|
| 量能突破回踩 | 中频交易 | 全市场 | ⭐⭐⭐ |
| 稳健趋势跟随 | 低频交易 | 蓝筹股 | ⭐⭐ |
| 激进动量突破 | 高频交易 | 创业板/科创板 | ⭐⭐⭐⭐⭐ |
| 平衡多因子 | 中频交易 | 中证500 | ⭐⭐⭐ |

---

## 📊 回测示例

**示例策略**：量能突破回踩策略
**回测周期**：2024-01-01 至 2025-02-13
**股票池**：创业板 300 只

**回测结果**：

```
📈 总收益率：        35.42%
💰 年化收益率：      18.23%
📉 最大回撤：        -12.5%
📊 夏普比率：        1.45
🎯 胜率：            62.3%
📈 盈亏比：          2.1:1
🔄 交易次数：        128 次
```

---

## 📁 文件说明

```
📦 stock_test/
├── 📄 启动应用.bat              # Windows 一键启动
├── 📄 安装依赖.bat              # 依赖安装脚本
├── 📖 用户使用手册.md           # 详细使用说明
├── 📋 requirements_release.txt  # Python 依赖列表
├── 🐍 app_with_cache.py         # 主程序入口
├── ⚙️ config.py                 # 配置文件
├── 📊 strategy.py               # 策略实现
├── 🔧 backtest_engine.py        # 回测引擎
├── 💾 data_manager.py           # 数据管理
└── 📂 templates/                # Web 界面
```

---

## ⚙️ 系统要求

| 项目 | 要求 |
|------|------|
| 操作系统 | Windows 10/11、macOS、Linux |
| Python | 3.8 或更高版本 |
| 内存 | 建议 4GB+ |
| 硬盘 | 建议 1GB+ 可用空间 |
| 网络 | 首次运行需要联网下载数据 |

---

## 🔧 常见问题

### Q: 启动失败怎么办？

**A**: 依次检查：
1. Python 版本是否 ≥ 3.8
2. 是否运行了"安装依赖.bat"
3. 5000 端口是否被占用

### Q: 数据获取失败？

**A**: 可能原因：
- 网络连接问题 → 检查网络
- API 限流 → 降低并发数量
- 股票代码错误 → 检查输入格式

### Q: 回测结果不准确？

**A**: 注意事项：
- 确保数据完整性
- 检查策略参数设置
- 回测不等于实盘，仅供参考

---

## 📞 技术支持

### 📧 问题反馈

遇到问题请提供：
- 操作系统和 Python 版本
- 错误截图或日志
- 复现步骤

### 📚 相关文档

- [用户使用手册](用户使用手册.md) - 详细操作指南
- [策略说明](STRATEGY_GUIDE.md) - 策略原理和参数
- [开发文档](DEVELOPMENT_GUIDE.md) - 二次开发指南

---

## ⚠️ 重要提示

**本系统仅供学习和研究使用**

- ❌ 不构成任何投资建议
- ❌ 回测结果不代表实际收益
- ❌ 实盘交易风险自负

**投资有风险，入市需谨慎！**

---

## 📜 版本历史

### V2.1 (2025-02-14)
- ✅ 新增成交金额因子
- ✅ 优化分类逻辑
- ✅ 修复性能问题

### V2.0 (2025-02-14)
- ✅ 实现多策略框架
- ✅ 新增参数配置API
- ✅ 支持批量回测

---

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

---

**© 2025 量化回测系统 | 专注于量化交易研究**

**⭐ 如果觉得有用，请给个 Star！**
